/* Copyright CBT Limited London - may only used with http://razor-cloud.com services */
(function(d){function g(){b.error&&console.log("review "+b.pos+", "+b.productid+", "+b.rows+", "+b.error);d.getJSON(jsonURL(),{service:"review",pos:b.pos,productid:b.productid,rows:b.rows},function(a){if(a.message)b.error&&console.log(a.message);else{for(var e=!0,c="<thead><tr>",f=0;f<b.fields.length;f++)c+="<th>"+b.fields[f][1]+"</th>";c+="</tr></thead><tbody>";d.each(a.items,function(a){c=e?c+"<tr class='odd'>":c+"<tr class='even'>";e=!e;for(a=0;a<b.fields.length;a++){var d=eval("item."+b.fields[a][0]);
c+="<td>"+formatted(d,b.fields[a][2])+"</td>"}c+="</tr>"});d("#cbt_review").append(c)}}).error(function(){b.error&&console.log("review error")})}var b={pos:"",productid:"",rows:6,error:!1,fields:[["date","Date","d"],["rating","Rating","n1"],["notes","Review"]]},e={init:function(a){b=d.extend(b,a);return this.each(function(){localize(function(){g()})})},productid:function(a){b.error&&console.log("set productid "+a);b.productid=a;g()}};d.fn.review=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof a||!a)return e.init.apply(this,arguments);console.log("Method "+a+" does not exist.")}})(jQuery);
