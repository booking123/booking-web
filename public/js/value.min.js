/* Copyright CBT Limited London - may only used with http://razor-cloud.com services */
(function(d){function h(b){a.error&&console.log("value "+a.pos+", "+a.model+", "+a.id+a.error);d.getJSON(jsonURL(),{service:"value",pos:a.pos,model:a.model,id:a.id},function(g){if(g.message)a.error&&console.log(g.message);else{var e=!0,c="<tbody><tr>";d.each(g.items,function(g,b){c=e?c+"<tr class='odd'>":c+"<tr class='even'>";e=!e;if(0<a.fields.length)for(var d=0;d<a.fields.length;d++){var f=a.fields[d][0];b.key.toLowerCase()==f.toLowerCase()&&(f=a.fields[d][2],c+="<td>"+a.fields[d][1]+"</td>",c+=
"<td>"+formatted(b.value,f,"en-US")+"</td>")}else c+="<td>"+b.key+"</td>",c+="<td>"+b.value+"</td>";c+="</tr>"});c+="</tbody>";d(b).append(c)}}).error(function(){a.error&&console.log("value error")})}var a={pos:"",model:"",id:"",error:!0,fields:[]},f={init:function(b){a=d.extend(a,b);return this.each(function(b,a){localize(function(){h(a)})})},id:function(b){a.error&&console.log("set id "+b);a.id=b;h()}};d.fn.value=function(b){if(f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));
if("object"===typeof b||!b)return f.init.apply(this,arguments);console.log("Method "+b+" does not exist.")};d.fn.value_set=function(b){var a=d.extend({pos:"",model:"",id:"",error:!1,fields:[]},b);return this.each(function(){localize(function(){var b="",c=0;for(c;c<a.fields.length;c++)b+=a.fields[c][0]+":"+a.fields[c][1]+",";console.log("value_set "+a.pos+", "+a.model+", "+a.id+", "+b+", "+a.error);d.getJSON(jsonURL(),{service:"value",method:"set",pos:a.pos,model:a.model,id:a.id,kvs:b},function(b){b.message&&
a.error&&console.log(b.message)}).error(function(){a.error&&console.log("value_set error")})})})};d.fn.keyvalue=function(a,d){var e=0;for(e;e<a.length;e++)if(a[e].key==d)return a.value;return null}})(jQuery);
