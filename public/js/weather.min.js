(function(f){function i(e){var g=new Date,h="",h=isNaN(b.wid)?"select * from weather.forecast where location in ('"+b.wid+"') and u='"+b.unit+"'":"select * from weather.forecast where woeid in ("+b.wid+") and u='"+b.unit+"'",h="http://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(h)+"&rnd="+g.getFullYear()+g.getMonth()+g.getDay()+g.getHours()+"&format=json&callback=?";f.ajax({type:"GET",url:h,dataType:"json",success:function(a){a=a.query.results.channel;wpd=a.item.pubDate;n=wpd.indexOf(":");
tpb=j(wpd.substr(n-2,8));tsr=j(a.astronomy.sunrise);tss=j(a.astronomy.sunset);daynight=tpb>tsr&&tpb<tss?"d":"n";var c="<div";b.image&&(c+=" style='background-image: url(http://l.yimg.com/a/i/us/nws/weather/gr/"+a.item.condition.code+daynight+".png); background-repeat: no-repeat;'");c=c+">"+("<div class='cbt_city'>"+a.location.city+"</div>");c+="<div class='cbt_temp'>"+a.item.condition.temp+"&deg;</div>";c+="<div class='cbt_note'>"+a.item.condition.text+"</div>";b.range&&(c+="<div class='cbt_range'>Today's High: "+
a.item.forecast[0].high+"&deg; Low: "+a.item.forecast[0].low+"&deg;</div>");b.range&&(c+="<div class='cbt_range'>Tomorrow's High: "+a.item.forecast[1].high+"&deg; Low: "+a.item.forecast[1].low+"&deg;</div>");b.wind&&(c+="<div class='cbt_wind'>Wind: "+(348.75<=a.wind.direction&&360>=a.wind.direction||0<=a.wind.direction&&11.25>a.wind.direction?"N":11.25<=a.wind.direction&&33.75>a.wind.direction?"NNE":33.75<=a.wind.direction&&56.25>a.wind.direction?"NE":56.25<=a.wind.direction&&78.75>a.wind.direction?
"ENE":78.75<=a.wind.direction&&101.25>a.wind.direction?"E":101.25<=a.wind.direction&&123.75>a.wind.direction?"ESE":123.75<=a.wind.direction&&146.25>a.wind.direction?"SE":146.25<=a.wind.direction&&168.75>a.wind.direction?"SSE":168.75<=a.wind.direction&&191.25>a.wind.direction?"S":191.25<=a.wind.direction&&213.75>a.wind.direction?"SSW":213.75<=a.wind.direction&&236.25>a.wind.direction?"SW":236.25<=a.wind.direction&&258.75>a.wind.direction?"WSW":258.75<=a.wind.direction&&281.25>a.wind.direction?"W":
281.25<=a.wind.direction&&303.75>a.wind.direction?"WNW":303.75<=a.wind.direction&&326.25>a.wind.direction?"NW":326.25<=a.wind.direction&&348.75>a.wind.direction?"NNW":"??")+" "+a.wind.speed+a.units.speed+"</div>");b.link&&(c+="<div class='cbt_link'><a href='"+a.item.link+"'>Full forecast</a></div>");b.date&&(c+="<div class='cbt_note'>"+g.toString().substring(0,10));NaN;f(e).append(c+"</div>")},error:function(){b.error&&f(e).append("<div>weather error</div>")}})}var b={wid:1591691,unit:"c",image:!0,
range:!0,wind:!0,link:!0,date:!0,error:!1},k={init:function(e){b=f.extend(b,e);return this.each(function(e,b){i(b)})},wid:function(e){b.error&&console.log("set wid "+e);b.wid=e;i()},unit:function(e){b.error&&console.log("set unit "+e);b.unit=e;i()}};f.fn.weather=function(b){if(k[b])return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof b||!b)return k.init.apply(this,arguments);console.log("Method "+b+" does not exist.")};var j=function(b){d=new Date;return r=new Date(d.toDateString()+
" "+b)}})(jQuery);
