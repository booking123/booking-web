/* Copyright CBT Limited London - may only used with http://razor-cloud.com services */
(function(e){function g(){a.error&&console.log("route "+a.latitude+", "+a.longitude+", "+a.origin+", "+a.travelMode+", "+a.unitSystem+", "+a.plain+", "+a.error);!a.origin&&a.error&&console.log("Invalid address of the origin of a route to the property");var b=new google.maps.LatLng(a.latitude,a.longitude);e("#cbt_route").gmap({center:b,zoom:a.zoom,callback:function(){this.displayDirections({origin:a.origin,destination:b,travelMode:a.travelMode},{cbt_route:document.getElementById("cbt_route")},function(b,
e){"OK"!=e&&a.error&&console.log("route not found")})}});var g=a.plain,d={origin:a.origin,destination:b,travelMode:a.travelMode,unitSystem:a.unitSystem,region:Globalize.culture().language};i.route(d,function(a,b){if(b==google.maps.DirectionsStatus.OK){var f=a.routes[0].legs[0];e("#cbt_route_distance").append(f.distance.text);e("#cbt_route_duration").append(f.duration.text);e("#cbt_route_start").append(f.start_address);e("#cbt_route_end").append(f.end_address);for(var c="",d=0;d<f.steps.length;d++){var c=
c+"<tr>",h=f.steps[d].instructions;g&&(h=h.replace(RegExp("<b>","g"),""));c+="<td>"+h+"</td>";c+="<td>"+f.steps[d].distance.text+"</td>";c+="<td>"+f.steps[d].duration.text+"</td>";c+="</tr>"}e("#cbt_route_directions").append(c)}})}var i=new google.maps.DirectionsService,a={latitude:0,longitude:0,origin:"",travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.IMPERIAL,plain:!1,error:!0},d={init:function(b){a=e.extend(a,b);return this.each(function(){localize()})},latitude:function(b){a.error&&
console.log("set latitude "+b);a.latitude=b;g()},longitude:function(b){a.error&&console.log("set longitude "+b);a.longitude=b;g()},origin:function(b){a.error&&console.log("set origin "+b);a.origin=b;g()},travelMode:function(b){a.error&&console.log("set travelMode "+b);a.travelMode=b;g()},unitSystem:function(b){a.error&&console.log("set unitSystem "+b);a.unitSystem=b;g()}};e.fn.route=function(a){if(d[a])return d[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return d.init.apply(this,
arguments);console.log("Method "+a+" does not exist.")}})(jQuery);
