/* Copyright CBT Limited London - may only used with http://razor-cloud.com services */
var size=0,index=0,images=[],settings;
(function(a){a.fn.image=function(b){settings=a.extend({pos:"",model:"Product",id:"",wait:5E3,sequence:1,error:!0},b);settings.error&&console.log("image "+settings.pos+", "+settings.id+", "+settings.wait+", "+settings.sequence);return this.each(function(){!settings.wait||500>settings.wait||6E4<settings.wait?settings.error&&console.log("Invalid wait parameter - must be 500 < wait <= 60000 milliseconds"):!settings.sequence||0>settings.sequence||1<settings.sequence?settings.error&&console.log("Invalid sequence parameter - must be 0 for sequential or 1 for random order"):
a.getJSON(jsonURL(),{service:"image",pos:settings.pos,model:settings.model,id:settings.id},function(b){void 0==b?console.log("image data error"):void 0!=b.message?console.log(b.message):(a.each(b.items,function(a,b){images[index++]=new imageItem(b.url,b.notes)}),size=images.length,change("image"))}).error(function(){settings.error&&console.log("image error")})})}})(jQuery);function imageItem(a,b){this.image_item=new Image;this.image_item.src=a;this.image_item.title=b}
function getLocation(a){return a.image_item.src}function getRandom(a,b){return Math.floor(Math.random()*(b-a+1))+a}function getNext(){index=settings.sequence?getRandom(0,size-1):(index+1)%size;return getLocation(images[index])}function getPrevious(){index=(index-1)%size;return getLocation(images[index])}function prevImage(a){var b=getPrevious();document[a].src=b}function change(a){var b=getNext();document[a].src=b;timerID=setTimeout("change('"+a+"')",settings.wait)};
