/* Copyright CBT Limited London - may only used with http://razor-cloud.com services */
(function(f){function d(b){a.error&&console.log("account "+a.pos+", "+a.accountid+", "+a.entityid+", "+a.fromdate+", "+a.todate+", "+a.currency+", "+a.rows+", "+a.error);f.getJSON(jsonURL(),{service:"journal",pos:a.pos,accountid:a.accountid,entityid:a.entityid,fromdate:a.fromdate,todate:a.todate,currency:a.currency,rows:a.rows},function(d){if(void 0!=d.message)a.error&&console.log(d.message);else{for(var g=!0,c="<thead><tr>",e=0;e<a.fields.length;e++)c+="<th>"+a.fields[e][1]+"</th>";c+="</tr></thead><tbody>";
f.each(d.items,function(b,d){c=g?c+"<tr class='odd'>":c+"<tr class='even'>";g=!g;for(b=0;b<a.fields.length;b++){var e=eval("item."+a.fields[b][0]);"process"==a.fields[b][0]&&(e=h(e));c+="<td>"+formatted(e,a.fields[b][2],culture(d.currency))+"</td>"}c+="</tr>"});c+="</tbody>";f(b).append(c)}}).error(function(){a.error&&console.log("journal error")})}function h(a){switch(a){case "Payment":return"Pmt";case "Purchase":return"Pch";case "PurchaseSale":return"Inv";case "Receipt":return"Rct";case "ReservationSale":return"Inv";
case "Sale":return"Inv";default:return"Jnl"}}var a={pos:"",accountid:"",entityid:"0",fromdate:"1970-01-01",todate:"2020-12-31",currency:"USD",rows:50,error:!0,fields:[["date","Date","d"],["name","Reference"],["description","Description",50],["debitamount","Debit","c0"],["creditamount","Credit","c0"]]},e={init:function(b){a=f.extend(a,b);return this.each(function(a,b){localize(function(){d(b)})})},accountid:function(b){a.error&&console.log("set accountid "+b);a.accountid=b;d()},entityid:function(b){a.error&&
console.log("set entityid "+b);a.entityid=b;d()},fromdate:function(b){a.error&&console.log("set fromdate "+b);a.fromdate=b;d()},todate:function(b){a.error&&console.log("set todate "+b);a.todate=b;d()},currency:function(b){a.error&&console.log("set currency "+b);a.currency=b;d()}};f.fn.journal=function(a){if(e[a])return e[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return e.init.apply(this,arguments);console.log("Method "+a+" does not exist.")}})(jQuery);
